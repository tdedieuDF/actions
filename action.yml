name: Check all packages version
description: Check all packages version

inputs:
  script_name:
    description: "Script name to launch"
    required: true
outputs:
  status:
    description: "Return status"
    value: ${{ steps.status_id.outputs.status }}

runs:
  using: "composite"
  steps:
    - name: ${{ inputs.script_name }}
      shell: bash
      id: ${{ inputs.script_name }}
      continue-on-error: true
      run: ${{ github.action_path }}/.github/00-Scripts/${{ inputs.script_name }}.sh

    - name: Output status
      shell: bash
      if: ${{ steps.${{ inputs.script_name }}.outcome == 'failure' }}
      id: status_id
      run: |
        echo 'status<<EOF' >> $GITHUB_OUTPUT
        echo "$(cat err_${{ inputs.script_name }}.log)" >> $GITHUB_OUTPUT
        echo 'EOF' >> $GITHUB_OUTPUT
